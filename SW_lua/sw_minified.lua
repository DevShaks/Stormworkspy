API_PORT=5000;API_ENDPOINT='/'tick_interval=10;is_reply_pending=true;http_response_body=''http_request_body=''receivedNums={}receivedBools={}function onTick()tick_interval=tick_interval-1;if tick_interval<1 and is_reply_pending then tick_interval=5;transmit()end;for a=1,32 do output.setNumber(a,receivedNums[a]or 0)end;for a=1,32 do output.setNumber(a+32,receivedBools[a]and 1 or 0)end end;function transmit()local b="?"for a=1,32 do local c=input.getNumber(a)b=b.."num"..a.."="..c.."&"end;for a=1,32 do local d=input.getBool(a)b=b.."bool"..a.."="..tostring(d).."&"end;b=string.sub(b,1,-2)async.httpGet(API_PORT,API_ENDPOINT..b)is_reply_pending=false end;function httpReply(e,f,g)http_response_body=g;http_request_body=f;local h=jsonDecode(g)if h then for a=1,32 do receivedNums[a]=tonumber(h["num"..a])end;for a=1,32 do local i=h["bool"..a]receivedBools[a]=i=="true"end else http_response_body="Invalid JSON response"end;is_reply_pending=true end;function jsonDecode(j)local k={}local l,c;j=j:gsub('"%s*:','":')j=j:gsub(',%s*"',',"')j=j:gsub(':%s*"',': "')j=j:gsub(',%s*}','}')j=j:gsub('{%s*"','{"')for m,n in j:gmatch('"(.-)":%s*(.-)[,%}]')do l=m:gsub('%s*$','')c=n:gsub('^%s*',''):gsub('%s*$',''):gsub('^"',''):gsub('"$','')k[l]=c end;return k end;function onDraw()width=screen.getWidth()height=screen.getHeight()screen.drawTextBox(1,1,width,height,http_response_body,0,0)end